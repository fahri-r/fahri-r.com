---
import type {
	Heading1,
	Heading2,
	Heading3,
	ToDoList
} from '~/interfaces/notion/block.interface.ts';
import RichText from './rich-text.astro';
import NotionBlock from './notion-block.astro';
import '~/styles/notion-color.css';

interface Props {
	list: ToDoList;
	headings: (Heading1 | Heading2 | Heading3)[];
}

const { list, headings }: Props = Astro.props;
const { listItems: blocks } = list;
---

<div class="to-do">
	{
		blocks.map((b) => (
			<div class={b.color.replaceAll('_', '-')}>
				<input type="checkbox" checked={b.checked} disabled />
				{b.richTexts.map((richText) =>
					b.checked ? (
						<s>
							<RichText {richText} />
						</s>
					) : (
						<RichText {richText} />
					)
				)}

				{b.hasChildren && b.children && <NotionBlock blocks={b.children} {headings} />}
			</div>
		))
	}
</div>

<style>
	.to-do {
		color: #222;
		font-weight: 400;
		font-size: 1rem;
		line-height: 1.8rem;
		padding-inline-start: 1rem;
	}
	.to-do > div {
	}
	.to-do > div > input {
	}
	.to-do > div > s {
		color: var(--accents-3);
	}
</style>

---
import { Image } from 'astro:assets';
import { Link } from '../shared/link';
import { Separator } from '../shared/separator';
import type { CollectionEntry } from 'astro:content';
import { Badge } from '../shared/badge';

interface Props {
	entry: CollectionEntry<'projects'>;
}

const { entry } = Astro.props;

const formattedDate = new Date(entry.data.date).toLocaleString('en-US', {
	month: 'short',
	day: 'numeric',
	year: 'numeric'
});
---

<div
	class="hover:bg-muted/50 rounded-xl border border-neutral-800 bg-neutral-900 p-4 transition-colors duration-300 ease-in-out"
>
	<Link href={`/${entry.collection}/${entry.id}`} className="flex flex-col gap-4 sm:flex-row">
		{
			entry.data.cover && (
				<div class="max-h-36 w-full overflow-clip sm:max-w-3xs sm:shrink-0">
					<Image
						src={entry.data.cover}
						alt={entry.data.title}
						width={1200}
						height={630}
						class="object-contain"
					/>
				</div>
			)
		}

		<div class="grow text-neutral-400">
			<h3 class="mb-1 text-lg font-medium">{entry.data.title}</h3>
			<p class="mb-2 text-sm">{entry.data.description}</p>

			<div class="mb-2 flex flex-wrap items-center gap-x-2 text-xs">
				<span>{formattedDate}</span>
				<Separator orientation="vertical" className="h-4!" />
			</div>

			{
				entry.data.tools && (
					<div class="flex flex-wrap gap-2">
						{entry.data.tools.map((tool) => (
							<Badge variant="secondary" className="flex items-center gap-x-1">
								{tool}
							</Badge>
						))}
					</div>
				)
			}
		</div>
	</Link>
</div>
